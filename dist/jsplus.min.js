Array.range=function(t){return Array.range(0,t)},Array.range=function(t,e){let r=[];e<t&&([t,e]=[e,t]);for(let n=t;n<e;++n)r.push(n);return r},Array.generate=function(t,e){return Array.range(t).map(e)},Array.prototype.groupsOf=function(t){let e=[],r=[];for(let n=0;n<this.length;++n)r.push(this[n]),n%t==t-1&&(e.push(r),r=[]);return r.length>0&&e.push(r),e},Array.prototype.last=function(){return this.length>0?this[this.length-1]:null},Array.prototype.sample=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.sampleAndRemove=function(){let t=this.sample();return this.remove(t),t},Array.prototype.min=function(){if(this.length<1)throw"Array.min() called on empty array.";let t=this[0];for(let e=1;e<this.length;++e)this[e]<t&&(t=this[e]);return t},Array.prototype.max=function(){if(this.length<1)throw"Array.max() called on empty array.";let t=this[0];for(let e=1;e<this.length;++e)this[e]>t&&(t=this[e]);return t},Array.prototype.range=function(){return this.length>0?this.max()-this.min():0},Array.prototype.remove=function(t){let e=0;for(;e<this.length;)this[e]==t?this.splice(e,1):++e},Array.prototype.removeExact=function(t){let e=0;for(;e<this.length;)this[e]===t?this.splice(e,1):++e};var $={onload:t=>{"complete"===document.readyState?t(null):window.addEventListener("load",t)},q:t=>document.querySelector(t),qa:t=>document.querySelectorAll(t)};const SVGNS="http://www.w3.org/2000/svg";class Elem{constructor(t){this.classes=[],this.styles=[],this.attrs=[],this.events=new Map,this.parent=null,this.id=null,this.src=null,this.text=null,this.tagName=t}withStyle(t,e){return this.styles.push([t,e]),this}withClass(t,...e){return this.classes.push(t),e.forEach((t=>this.classes.push(t))),this}withClassIf(t,e,...r){return t&&(this.classes.push(e),r.forEach((t=>this.classes.push(t)))),this}childOf(t){return this.parent=t,this}withId(t){return this.id=t,this}withText(t){return this.text=t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"),this}withHtml(t){return this.text=t,this}withSrc(t){return this.src=t,this}withAttr(t,e){return this.attrs.push([t,e]),this}on(t,e){return this.events.set(t,e),this}buildNS(t){let e=document.createElementNS(t,this.tagName);this.classes.forEach((t=>e.classList.add(t))),this.attrs.forEach((([t,r])=>e.setAttribute(t,r))),this.styles.forEach((([t,r])=>e.style.setProperty(t,r))),null!==this.id&&(e.id=this.id),null!==this.text&&(e.textContent=this.text),null!==this.src&&(e.src=this.src),null!==this.parent&&this.parent.appendChild(e);for(let t in this.events)e.addEventListener(t,this.events.get(t),!1);return e}build(){let t=document.createElement(this.tagName);this.classes.forEach((e=>t.classList.add(e))),this.attrs.forEach((([e,r])=>t.setAttribute(e,r))),this.styles.forEach((([e,r])=>t.style.setProperty(e,r))),null!==this.id&&(t.id=this.id),null!==this.text&&(t.textContent=this.text),null!==this.src&&(t.src=this.src),null!==this.parent&&this.parent.appendChild(t);for(let e in this.events)t.addEventListener(e,this.events.get(e),!1);return t}}class HTTP{constructor(t,e){this.verb=t,this.url=e,this.onProgress=null,this.onSuccess=null,this.onError=null,this.onComplete=null,this.req=new XMLHttpRequest;let r=this;this.req.addEventListener("progress",(t=>{null!==r.onProgress&&t.lengthComputable&&r.onProgress.apply(r,[t.loaded/t.total])})),this.req.addEventListener("load",(t=>{null!==r.onSuccess&&r.onSuccess.apply(r,[r.req.response]),null!==r.onComplete&&r.onComplete.apply(r,[r.req.response])}));let n=t=>{null!==r.onError&&r.onError.apply(r,[r.req.response]),null!==r.onComplete&&r.onComplete.apply(r,[r.req.response])};this.req.addEventListener("error",n),this.req.addEventListener("abort",n)}static get(t){return new HTTP("GET",t)}static post(t){return new HTTP("POST",t)}static put(t){return new HTTP("PUT",t)}static patch(t){return new HTTP("PATCH",t)}static delete(t){return new HTTP("DELETE",t)}success(t){if(!(t instanceof Function))throw new TypeError("HTTP request success handler must be a function.");return this.onSuccess=t,this}error(t){if(!(t instanceof Function))throw new TypeError("HTTP request error handler must be a function.");return this.onError=t,this}finally(t){if(!(t instanceof Function))throw new TypeError("HTTP request complete handler must be a function.");return this.onComplete=t,this}progress(t){if(!(t instanceof Function))throw new TypeError("HTTP request progress handler must be a function.");return this.onProgress=t,this}responseType(t){return this.req.responseType=t,this}send(){return this.req.open(this.verb,this.url),this.req.send(),this}}function isFunction(t){return"[object Function]"===toString.call(t)}function isNumber(t){return"number"==typeof t&&t-t==0}function xor(t,e){return t&&!e||!t&&e}Math.clamp=function(t,e,r){return Math.min(Math.max(e,t),r)},Math.lerp=function(t,e,r){return t*(1-r)+e*r},Math.randomPointInCircle=function(){let t=2*Math.random()*Math.PI,e=Math.random()+Math.random();return e>1&&(e=2-e),[e*Math.cos(t),e*Math.sin(t)]},Math.randomNormalDeviate=function(){let t,e,r;do{t=Math.random(),e=1.7156*(Math.random()-.5);let n=t-.449871,s=Math.abs(e)+.386595;r=n*n+s*(.196*s-.25472*n)}while(r>.27597&&(r>.27846||e*e>-4*Math.log(t)*t*t));return e/t},Math.randomGammaDeviate=function(t){void 0===t&&(t=1);let e=t,r=0,n=0,s=0;t<1&&(t+=1);let i=t-1/3,o=1/Math.sqrt(9*i);do{do{s=Math.randomNormalDeviate(),n=1+o*s}while(n<=0);n*=n*n,r=Math.random()}while(r>1-.331*Math.pow(s,4)&&Math.log(r)>.5*s*s+i*(1-n+Math.log(n)));if(t==e)return i*n;do{r=Math.random()}while(0===r);return Math.pow(r,1/e)*i*n},Math.betaSample=function(t,e){let r=t*(1-t)/(e*e),n=t*r,s=(1-t)*r,i=Math.randomGammaDeviate(n);return i/(i+Math.randomGammaDeviate(s))},Math.randomIntRangeInclusive=function(t,e){return t=Math.trunc(t),e=Math.trunc(e)+1,Math.floor(Math.random()*(e-t))+t},Object.deepCopy=function(t){if(null===t||"object"!=typeof t||"__isActiveClone__"in t)return t;let e=t instanceof Date?new Date(t):t.constructor();for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t.__isActiveClone__=null,e[r]=Object.deepCopy(t[r]),delete t.__isActiveClone__);return e};class WeightedRandom{constructor(t){this.weights=t,this.duped=null}sample(){if(null===this.duped){this.duped=[];for(let t of this.weights)for(let e of[...Array(t.weight)])this.duped.push(t.value)}let t=Math.floor(Math.random()*this.duped.length);return this.duped[t]}}String.prototype.toTitleCase=function(){let t=[...this],e=t.shift().toUpperCase(),r=!1;for(let n of t)" "===n||"_"===n?(r=!0,e+=" "):(e+=r?n.toUpperCase():n.toLowerCase(),r=!1);return e},String.prototype.toSnakeCase=function(){return this.toLowerCase().replaceAll(" ","_")},String.prototype.last=function(){return[...this].last()};
//# sourceMappingURL=jsplus.min.js.map
