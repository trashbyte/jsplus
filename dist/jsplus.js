(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
// Array constructor extensions ////////////////////////////////////////////////
Array.range = function (end) {
    return Array.range(0, end);
};
Array.range = function (start, end) {
    let result = [];
    if (end < start) {
        [start, end] = [end, start];
    }
    for (let i = start; i < end; ++i) {
        result.push(i);
    }
    return result;
};
Array.generate = function (n, func) {
    return Array.range(n).map(func);
};
Array.prototype.groupsOf = function (n) {
    let result = [];
    let group = [];
    for (let i = 0; i < this.length; ++i) {
        group.push(this[i]);
        if (i % n == n - 1) {
            result.push(group);
            group = [];
        }
    }
    if (group.length > 0) {
        result.push(group);
    }
    return result;
};
Array.prototype.last = function () {
    return this.length > 0 ? this[this.length - 1] : null;
};
Array.prototype.sample = function () {
    return this[Math.floor(Math.random() * this.length)];
};
Array.prototype.sampleAndRemove = function () {
    let result = this.sample();
    this.remove(result);
    return result;
};
Array.prototype.min = function () {
    if (this.length < 1) {
        throw "Array.min() called on empty array.";
    }
    let min = this[0];
    for (let i = 1; i < this.length; ++i) {
        if (this[i] < min) {
            min = this[i];
        }
    }
    return min;
};
Array.prototype.max = function () {
    if (this.length < 1) {
        throw "Array.max() called on empty array.";
    }
    let max = this[0];
    for (let i = 1; i < this.length; ++i) {
        if (this[i] > max) {
            max = this[i];
        }
    }
    return max;
};
Array.prototype.range = function () {
    return this.length > 0 ? (this.max() - this.min()) : 0;
};
Array.prototype.remove = function (elem) {
    let i = 0;
    while (i < this.length) {
        if (this[i] == elem) {
            this.splice(i, 1);
        }
        else {
            ++i;
        }
    }
};
Array.prototype.removeExact = function (elem) {
    let i = 0;
    while (i < this.length) {
        if (this[i] === elem) {
            this.splice(i, 1);
        }
        else {
            ++i;
        }
    }
};
},{}],2:[function(require,module,exports){
// Element builder /////////////////////////////////////////////////////////////
const SVGNS = "http://www.w3.org/2000/svg";
class Elem {
    constructor(tagName) {
        this.classes = [];
        this.styles = [];
        this.attrs = [];
        this.events = new Map();
        this.parent = null;
        this.id = null;
        this.src = null;
        this.text = null;
        this.tagName = tagName;
    }
    withStyle(rule, value) {
        this.styles.push([rule, value]);
        return this;
    }
    withClass(cls, ...more) {
        this.classes.push(cls);
        more.forEach(c => this.classes.push(c));
        return this;
    }
    withClassIf(predicate, cls, ...more) {
        if (predicate) {
            this.classes.push(cls);
            more.forEach(c => this.classes.push(c));
        }
        return this;
    }
    childOf(parent) {
        this.parent = parent;
        return this;
    }
    withId(id) {
        this.id = id;
        return this;
    }
    withText(text) {
        this.text = text.replaceAll('&', '&amp;')
            .replaceAll('<', '&lt;')
            .replaceAll('>', '&gt;')
            .replaceAll('"', '&quot;')
            .replaceAll("'", '&#039;');
        return this;
    }
    withHtml(html) {
        this.text = html;
        return this;
    }
    withSrc(src) {
        this.src = src;
        return this;
    }
    withAttr(attr, value) {
        this.attrs.push([attr, value]);
        return this;
    }
    on(event, handler) {
        this.events.set(event, handler);
        return this;
    }
    buildNS(ns) {
        let e = document.createElementNS(ns, this.tagName);
        this.classes.forEach(c => e.classList.add(c));
        this.attrs.forEach(([attr, value]) => e.setAttribute(attr, value));
        this.styles.forEach(([rule, value]) => e.style.setProperty(rule, value));
        if (this.id !== null) {
            e.id = this.id;
        }
        if (this.text !== null) {
            e.textContent = this.text;
        }
        if (this.src !== null) {
            e.src = this.src;
        }
        if (this.parent !== null) {
            this.parent.appendChild(e);
        }
        for (let event in this.events) {
            e.addEventListener(event, this.events.get(event), false);
        }
        return e;
    }
    build() {
        let e = document.createElement(this.tagName);
        this.classes.forEach(c => e.classList.add(c));
        this.attrs.forEach(([attr, value]) => e.setAttribute(attr, value));
        this.styles.forEach(([rule, value]) => e.style.setProperty(rule, value));
        if (this.id !== null) {
            e.id = this.id;
        }
        if (this.text !== null) {
            e.textContent = this.text;
        }
        if (this.src !== null) {
            e.src = this.src;
        }
        if (this.parent !== null) {
            this.parent.appendChild(e);
        }
        for (let event in this.events) {
            e.addEventListener(event, this.events.get(event), false);
        }
        return e;
    }
}
},{}],3:[function(require,module,exports){
// HTTP ////////////////////////////////////////////////////////////////////////////////////////////
// TODO: status codes, body/params, timeout, headers
//HTTP.get("example.com")
//	.urlParams([["q", "src"], ["id", "0"]])
//	.body({})
//	.contentType("")
//	.header("", "")
//	.header("", "")
//	.timeout(0)
class HTTP {
    constructor(verb, url) {
        this.verb = verb;
        this.url = url;
        this.onProgress = null;
        this.onSuccess = null;
        this.onError = null;
        this.onComplete = null;
        this.req = new XMLHttpRequest();
        let self = this;
        this.req.addEventListener("progress", (evt) => {
            if (self.onProgress !== null && evt.lengthComputable) {
                self.onProgress.apply(self, [evt.loaded / evt.total]);
            }
        });
        this.req.addEventListener("load", (evt) => {
            if (self.onSuccess !== null) {
                self.onSuccess.apply(self, [self.req.response]);
            }
            if (self.onComplete !== null) {
                self.onComplete.apply(self, [self.req.response]);
            }
        });
        let errorHandler = (evt) => {
            if (self.onError !== null) {
                self.onError.apply(self, [self.req.response]);
            }
            if (self.onComplete !== null) {
                self.onComplete.apply(self, [self.req.response]);
            }
        };
        this.req.addEventListener("error", errorHandler);
        this.req.addEventListener("abort", errorHandler);
    }
    static get(url) {
        return new HTTP("GET", url);
    }
    static post(url) {
        return new HTTP("POST", url);
    }
    static put(url) {
        return new HTTP("PUT", url);
    }
    static patch(url) {
        return new HTTP("PATCH", url);
    }
    static delete(url) {
        return new HTTP("DELETE", url);
    }
    success(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request success handler must be a function.");
        }
        this.onSuccess = handler;
        return this;
    }
    error(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request error handler must be a function.");
        }
        this.onError = handler;
        return this;
    }
    finally(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request complete handler must be a function.");
        }
        this.onComplete = handler;
        return this;
    }
    progress(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request progress handler must be a function.");
        }
        this.onProgress = handler;
        return this;
    }
    responseType(ty) {
        this.req.responseType = ty;
        return this;
    }
    send() {
        this.req.open(this.verb, this.url);
        this.req.send();
        return this;
    }
}
},{}],4:[function(require,module,exports){
// Free-standing functions /////////////////////////////////////////////////////
function isFunction(arg) {
    return toString.call(arg) === '[object Function]';
}
function isNumber(num) {
    return (typeof num === 'number') ? num - num === 0 : false;
}
function xor(a, b) {
    return (a && !b) || (!a && b);
}
Object.deepCopy = function (obj) {
    if (obj === null || typeof (obj) !== 'object' || '__isActiveClone__' in obj) {
        return obj;
    }
    let temp = obj instanceof Date ? new Date(obj) : obj.constructor();
    for (let key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            obj['__isActiveClone__'] = null;
            temp[key] = Object.deepCopy(obj[key]);
            delete obj['__isActiveClone__'];
        }
    }
    return temp;
};
// Weighted random /////////////////////////////////////////////////////////////
class WeightedRandom {
    constructor(weights) {
        this.weights = weights;
        this.duped = null;
    }
    sample() {
        if (this.duped === null) {
            this.duped = [];
            for (let w of this.weights) {
                for (let _ of [...Array(w.weight)]) {
                    this.duped.push(w.value);
                }
            }
        }
        let roll = Math.floor(Math.random() * this.duped.length);
        return this.duped[roll];
    }
}
},{}],5:[function(require,module,exports){
// Math extensions /////////////////////////////////////////////////////////////
Math.clamp = function (x, min, max) {
    return Math.min(Math.max(min, x), max);
};
Math.lerp = function (a, b, x) {
    return (a * (1 - x)) + (b * x);
};
Math.randomPointInCircle = function () {
    let angle = Math.random() * 2.0 * Math.PI;
    let r = Math.random() + Math.random();
    if (r > 1) {
        r = 2 - r;
    }
    return [r * Math.cos(angle), r * Math.sin(angle)];
};
Math.randomNormalDeviate = function () {
    let u, v, q;
    do {
        u = Math.random();
        v = 1.7156 * (Math.random() - 0.5);
        let x = u - 0.449871;
        let y = Math.abs(v) + 0.386595;
        q = x * x + y * (0.19600 * y - 0.25472 * x);
    } while (q > 0.27597 && (q > 0.27846 || v * v > -4 * Math.log(u) * u * u));
    return v / u;
};
Math.randomGammaDeviate = function (shape) {
    if (shape === undefined)
        shape = 1;
    let oalph = shape;
    let u = 0;
    let v = 0;
    let x = 0;
    if (shape < 1)
        shape += 1;
    let a1 = shape - 1 / 3;
    let a2 = 1 / Math.sqrt(9 * a1);
    do {
        do {
            x = Math.randomNormalDeviate();
            v = 1 + a2 * x;
        } while (v <= 0);
        v = v * v * v;
        u = Math.random();
    } while (u > 1 - 0.331 * Math.pow(x, 4) && Math.log(u) > 0.5 * x * x + a1 * (1 - v + Math.log(v)));
    // alpha > 1
    if (shape == oalph)
        return a1 * v;
    // alpha < 1
    do {
        u = Math.random();
    } while (u === 0);
    return Math.pow(u, 1 / oalph) * a1 * v;
};
// Returns a random sample from a beta distribution with the given mean and variance.
// 0 variance is undefined
// v = 0 to 0.35 is a bell curve
// v ~= 0.35 is uniform
// v > 0.35 is an inverse bell curve
Math.betaSample = function (mean, variance) {
    let n = (mean * (1.0 - mean)) / (variance * variance);
    let alpha = mean * n;
    let beta = (1.0 - mean) * n;
    let u = Math.randomGammaDeviate(alpha);
    return u / (u + Math.randomGammaDeviate(beta));
};
Math.randomIntRangeInclusive = function (min, max) {
    min = Math.trunc(min);
    max = Math.trunc(max) + 1;
    return Math.floor(Math.random() * (max - min)) + min;
};
},{}],6:[function(require,module,exports){
// String extensions ///////////////////////////////////////////////////////////
String.prototype.toTitleCase = function () {
    let chars = [...this];
    let result = chars.shift().toUpperCase();
    let afterSpace = false;
    for (let c of chars) {
        if (c === " " || c === "_") {
            afterSpace = true;
            result += " ";
        }
        else {
            if (afterSpace) {
                result += c.toUpperCase();
            }
            else {
                result += c.toLowerCase();
            }
            afterSpace = false;
        }
    }
    return result;
};
String.prototype.toSnakeCase = function () {
    return this.toLowerCase().replaceAll(" ", "_");
};
String.prototype.last = function () { return [...this].last(); };
},{}]},{},[1,2,3,4,5,6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXJyYXkudHMiLCJzcmMvZWxlbS50cyIsInNyYy9odHRwLnRzIiwic3JjL2pzcGx1cy50cyIsInNyYy9tYXRoLnRzIiwic3JjL3N0cmluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGdGQUFnRjtBQVNoRixLQUFLLENBQUMsS0FBSyxHQUFHLFVBQVMsR0FBVztJQUNqQyxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0FBQzNCLENBQUMsQ0FBQTtBQUdELEtBQUssQ0FBQyxLQUFLLEdBQUcsVUFBUyxLQUFhLEVBQUUsR0FBVztJQUNoRCxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUE7SUFDWixJQUFJLEdBQUcsR0FBRyxLQUFLLEVBQUU7UUFDYixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtLQUM5QjtJQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUU7UUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUNqQjtJQUNKLE9BQU8sTUFBTSxDQUFBO0FBQ2QsQ0FBQyxDQUFBO0FBR0QsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFZLENBQVMsRUFBRSxJQUF3QjtJQUMvRCxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQ2hDLENBQUMsQ0FBQTtBQW1CRCxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFTLENBQVM7SUFDNUMsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO0lBQ2YsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFBO0lBQ2QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFD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TyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUEsQ0FBQyxDQUFDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyBBcnJheSBjb25zdHJ1Y3RvciBleHRlbnNpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbmRlY2xhcmUgaW50ZXJmYWNlIEFycmF5Q29uc3RydWN0b3Ige1xyXG4gICAgcmFuZ2Uoc3RhcnQ6IG51bWJlciwgZW5kPzogbnVtYmVyKTogQXJyYXk8bnVtYmVyPlxyXG4gICAgZ2VuZXJhdGU8VD4objogbnVtYmVyLCBmdW5jOiAobnVtOiBudW1iZXIpID0+IFQpOiBBcnJheTxUPlxyXG59XHJcblxyXG5cclxuQXJyYXkucmFuZ2UgPSBmdW5jdGlvbihlbmQ6IG51bWJlcikge1xyXG5cdHJldHVybiBBcnJheS5yYW5nZSgwLCBlbmQpXHJcbn1cclxuXHJcblxyXG5BcnJheS5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogQXJyYXk8bnVtYmVyPiB7XHJcblx0bGV0IHJlc3VsdCA9IFtdXHJcbiAgICBpZiAoZW5kIDwgc3RhcnQpIHtcclxuICAgICAgICBbc3RhcnQsIGVuZF0gPSBbZW5kLCBzdGFydF1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goaSlcclxuICAgIH1cclxuXHRyZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcblxyXG5BcnJheS5nZW5lcmF0ZSA9IGZ1bmN0aW9uPFQ+KG46IG51bWJlciwgZnVuYzogKG51bTogbnVtYmVyKSA9PiBUKTogQXJyYXk8VD4ge1xyXG5cdHJldHVybiBBcnJheS5yYW5nZShuKS5tYXAoZnVuYylcclxufVxyXG5cclxuXHJcbi8vIEFycmF5IGV4dGVuc2lvbnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuZGVjbGFyZSBpbnRlcmZhY2UgQXJyYXk8VD4ge1xyXG4gICAgZ3JvdXBzT2YobjogbnVtYmVyKTogQXJyYXk8QXJyYXk8VD4+XHJcbiAgICBsYXN0KCk6IFR8bnVsbFxyXG4gICAgc2FtcGxlKCk6IFRcclxuICAgIHNhbXBsZUFuZFJlbW92ZSgpOiBUXHJcbiAgICBtaW4oKTogbnVtYmVyXHJcbiAgICBtYXgoKTogbnVtYmVyXHJcbiAgICByYW5nZSgpOiBudW1iZXJcclxuICAgIHJlbW92ZShlbGVtOiBUKTogdm9pZFxyXG4gICAgcmVtb3ZlRXhhY3QoZWxlbTogVCk6IHZvaWRcclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5ncm91cHNPZiA9IGZ1bmN0aW9uKG46IG51bWJlcikge1xyXG5cdGxldCByZXN1bHQgPSBbXVxyXG5cdGxldCBncm91cCA9IFtdXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XHJcblx0XHRncm91cC5wdXNoKHRoaXNbaV0pXHJcblx0XHRpZiAoaSAlIG4gPT0gbi0xKSB7XHJcblx0XHRcdHJlc3VsdC5wdXNoKGdyb3VwKVxyXG5cdFx0XHRncm91cCA9IFtdXHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChncm91cC5sZW5ndGggPiAwKSB7XHJcblx0XHRyZXN1bHQucHVzaChncm91cClcclxuXHR9XHJcblx0cmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5cclxuQXJyYXkucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcy5sZW5ndGggPiAwID8gdGhpc1t0aGlzLmxlbmd0aCAtIDFdIDogbnVsbFxyXG59XHJcblxyXG5cclxuQXJyYXkucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKV1cclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5zYW1wbGVBbmRSZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRsZXQgcmVzdWx0ID0gdGhpcy5zYW1wbGUoKVxyXG5cdHRoaXMucmVtb3ZlKHJlc3VsdClcclxuXHRyZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5sZW5ndGggPCAxKSB7IHRocm93IFwiQXJyYXkubWluKCkgY2FsbGVkIG9uIGVtcHR5IGFycmF5LlwiOyB9XHJcblxyXG4gICAgbGV0IG1pbiA9IHRoaXNbMF07XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAodGhpc1tpXSA8IG1pbikge1xyXG4gICAgICAgICAgICBtaW4gPSB0aGlzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbWluO1xyXG59XHJcblxyXG5cclxuQXJyYXkucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubGVuZ3RoIDwgMSkgeyB0aHJvdyBcIkFycmF5Lm1heCgpIGNhbGxlZCBvbiBlbXB0eSBhcnJheS5cIjsgfVxyXG5cclxuICAgIGxldCBtYXggPSB0aGlzWzBdO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPiBtYXgpIHtcclxuICAgICAgICAgICAgbWF4ID0gdGhpc1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1heDtcclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5yYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoID4gMCA/ICh0aGlzLm1heCgpIC0gdGhpcy5taW4oKSkgOiAwXHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgbGV0IGkgPSAwXHJcbiAgICB3aGlsZSAoaSA8IHRoaXMubGVuZ3RoKSB7XHJcbiAgICBcdGlmICh0aGlzW2ldID09IGVsZW0pIHsgdGhpcy5zcGxpY2UoaSwgMSkgfVxyXG4gICAgXHRlbHNlIHsgKytpIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5yZW1vdmVFeGFjdCA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgIGxldCBpID0gMFxyXG4gICAgd2hpbGUgKGkgPCB0aGlzLmxlbmd0aCkge1xyXG4gICAgXHRpZiAodGhpc1tpXSA9PT0gZWxlbSkgeyB0aGlzLnNwbGljZShpLCAxKSB9XHJcbiAgICBcdGVsc2UgeyArK2kgfVxyXG4gICAgfVxyXG59IiwiLy8gRWxlbWVudCBidWlsZGVyIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG5jb25zdCBTVkdOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxyXG5cclxuXHJcbmNsYXNzIEVsZW0ge1xyXG5cdHRhZ05hbWU6IHN0cmluZ1xyXG5cdGNsYXNzZXM6IEFycmF5PHN0cmluZz4gPSBbXVxyXG5cdHN0eWxlczogQXJyYXk8W3N0cmluZywgc3RyaW5nXT4gPSBbXVxyXG5cdGF0dHJzOiBBcnJheTxbc3RyaW5nLCBzdHJpbmddPiA9IFtdXHJcblx0ZXZlbnRzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbj4gPSBuZXcgTWFwKClcclxuXHRwYXJlbnQ6IEhUTUxFbGVtZW50fFNWR0VsZW1lbnR8bnVsbCA9IG51bGxcclxuXHRpZDogc3RyaW5nfG51bGwgPSBudWxsXHJcblx0c3JjOiBzdHJpbmd8bnVsbCA9IG51bGxcclxuXHR0ZXh0OiBzdHJpbmd8bnVsbCA9IG51bGxcclxuXHJcblx0Y29uc3RydWN0b3IgKHRhZ05hbWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy50YWdOYW1lID0gdGFnTmFtZVxyXG5cdH1cclxuXHJcblx0d2l0aFN0eWxlKHJ1bGU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IEVsZW0ge1xyXG5cdFx0dGhpcy5zdHlsZXMucHVzaChbcnVsZSwgdmFsdWVdKVxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblxyXG5cdHdpdGhDbGFzcyhjbHM6IHN0cmluZywgLi4ubW9yZTogc3RyaW5nW10pOiBFbGVtIHtcclxuXHRcdHRoaXMuY2xhc3Nlcy5wdXNoKGNscylcclxuXHRcdG1vcmUuZm9yRWFjaChjID0+IHRoaXMuY2xhc3Nlcy5wdXNoKGMpKVxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblxyXG5cdHdpdGhDbGFzc0lmKHByZWRpY2F0ZTogYm9vbGVhbiwgY2xzOiBzdHJpbmcsIC4uLm1vcmU6IHN0cmluZ1tdKTogRWxlbSB7XHJcblx0XHRpZiAocHJlZGljYXRlKSB7XHJcblx0XHRcdHRoaXMuY2xhc3Nlcy5wdXNoKGNscylcclxuXHRcdFx0bW9yZS5mb3JFYWNoKGMgPT4gdGhpcy5jbGFzc2VzLnB1c2goYykpXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHRcclxuXHRjaGlsZE9mKHBhcmVudDogSFRNTEVsZW1lbnR8U1ZHRWxlbWVudCk6IEVsZW0ge1xyXG5cdFx0dGhpcy5wYXJlbnQgPSBwYXJlbnRcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cdFxyXG5cdHdpdGhJZChpZDogc3RyaW5nKTogRWxlbSB7XHJcblx0XHR0aGlzLmlkID0gaWRcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cdFxyXG5cdHdpdGhUZXh0KHRleHQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy50ZXh0ID0gdGV4dC5yZXBsYWNlQWxsKCcmJywgJyZhbXA7JylcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2VBbGwoJzwnLCAnJmx0OycpXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlQWxsKCc+JywgJyZndDsnKVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZUFsbCgnXCInLCAnJnF1b3Q7JylcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2VBbGwoXCInXCIsICcmIzAzOTsnKVxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblx0XHJcblx0d2l0aEh0bWwoaHRtbDogc3RyaW5nKTogRWxlbSB7XHJcblx0XHR0aGlzLnRleHQgPSBodG1sXHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHRcclxuXHR3aXRoU3JjKHNyYzogc3RyaW5nKTogRWxlbSB7XHJcblx0XHR0aGlzLnNyYyA9IHNyY1xyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblx0XHJcblx0d2l0aEF0dHIoYXR0cjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogRWxlbSB7XHJcblx0XHR0aGlzLmF0dHJzLnB1c2goW2F0dHIsIHZhbHVlXSlcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cdFxyXG5cdG9uKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKTogRWxlbSB7XHJcblx0XHR0aGlzLmV2ZW50cy5zZXQoZXZlbnQsIGhhbmRsZXIpXHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHJcblx0YnVpbGROUyhuczogc3RyaW5nKTogRWxlbWVudCB7XHJcblx0XHRsZXQgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdGhpcy50YWdOYW1lKVxyXG5cdFx0dGhpcy5jbGFzc2VzLmZvckVhY2goYyA9PiBlLmNsYXNzTGlzdC5hZGQoYykpXHJcblx0XHR0aGlzLmF0dHJzLmZvckVhY2goKFthdHRyLCB2YWx1ZV0pID0+IGUuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKSlcclxuXHRcdHRoaXMuc3R5bGVzLmZvckVhY2goKFtydWxlLCB2YWx1ZV0pID0+IChlIGFzIGFueSkuc3R5bGUuc2V0UHJvcGVydHkocnVsZSwgdmFsdWUpKVxyXG5cdFx0aWYgKHRoaXMuaWQgIT09IG51bGwpIHsgZS5pZCA9IHRoaXMuaWQgfVxyXG5cdFx0aWYgKHRoaXMudGV4dCAhPT0gbnVsbCkgeyBlLnRleHRDb250ZW50ID0gdGhpcy50ZXh0IH1cclxuXHRcdGlmICh0aGlzLnNyYyAhPT0gbnVsbCkgeyAoZSBhcyBhbnkpLnNyYyA9IHRoaXMuc3JjIH1cclxuXHRcclxuXHRcdGlmICh0aGlzLnBhcmVudCAhPT0gbnVsbCkgeyB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZChlKSB9XHJcblx0XHJcblx0XHRmb3IgKGxldCBldmVudCBpbiB0aGlzLmV2ZW50cykge1xyXG5cdFx0XHQoZSBhcyBhbnkpLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuZXZlbnRzLmdldChldmVudCksIGZhbHNlKVxyXG5cdFx0fVxyXG5cdFxyXG5cdFx0cmV0dXJuIGVcclxuXHR9XHJcblx0XHJcblx0YnVpbGQoKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0bGV0IGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnTmFtZSlcclxuXHRcdHRoaXMuY2xhc3Nlcy5mb3JFYWNoKGMgPT4gZS5jbGFzc0xpc3QuYWRkKGMpKVxyXG5cdFx0dGhpcy5hdHRycy5mb3JFYWNoKChbYXR0ciwgdmFsdWVdKSA9PiBlLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSkpXHJcblx0XHR0aGlzLnN0eWxlcy5mb3JFYWNoKChbcnVsZSwgdmFsdWVdKSA9PiBlLnN0eWxlLnNldFByb3BlcnR5KHJ1bGUsIHZhbHVlKSlcclxuXHRcdGlmICh0aGlzLmlkICE9PSBudWxsKSB7IGUuaWQgPSB0aGlzLmlkIH1cclxuXHRcdGlmICh0aGlzLnRleHQgIT09IG51bGwpIHsgZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dCB9XHJcblx0XHRpZiAodGhpcy5zcmMgIT09IG51bGwpIHsgKGUgYXMgYW55KS5zcmMgPSB0aGlzLnNyYyB9XHJcblx0XHJcblx0XHRpZiAodGhpcy5wYXJlbnQgIT09IG51bGwpIHsgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQoZSkgfVxyXG5cdFxyXG5cdFx0Zm9yIChsZXQgZXZlbnQgaW4gdGhpcy5ldmVudHMpIHtcclxuXHRcdFx0KGUgYXMgYW55KS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpLCBmYWxzZSlcclxuXHRcdH1cclxuXHRcclxuXHRcdHJldHVybiBlXHJcblx0fVxyXG59XHJcbiIsIi8vIEhUVFAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vIFRPRE86IHN0YXR1cyBjb2RlcywgYm9keS9wYXJhbXMsIHRpbWVvdXQsIGhlYWRlcnNcclxuLy9IVFRQLmdldChcImV4YW1wbGUuY29tXCIpXHJcbi8vXHQudXJsUGFyYW1zKFtbXCJxXCIsIFwic3JjXCJdLCBbXCJpZFwiLCBcIjBcIl1dKVxyXG4vL1x0LmJvZHkoe30pXHJcbi8vXHQuY29udGVudFR5cGUoXCJcIilcclxuLy9cdC5oZWFkZXIoXCJcIiwgXCJcIilcclxuLy9cdC5oZWFkZXIoXCJcIiwgXCJcIilcclxuLy9cdC50aW1lb3V0KDApXHJcblxyXG5jbGFzcyBIVFRQIHtcclxuICAgIHJlcTogWE1MSHR0cFJlcXVlc3RcclxuICAgIG9uUHJvZ3Jlc3M6ICgocmVzcG9uc2U6IGFueSkgPT4gdm9pZCl8bnVsbCA9IG51bGxcclxuICAgIG9uU3VjY2VzczogICgocmVzcG9uc2U6IGFueSkgPT4gdm9pZCl8bnVsbCA9IG51bGxcclxuICAgIG9uRXJyb3I6ICAgICgocmVzcG9uc2U6IGFueSkgPT4gdm9pZCl8bnVsbCA9IG51bGxcclxuICAgIG9uQ29tcGxldGU6ICgocmVzcG9uc2U6IGFueSkgPT4gdm9pZCl8bnVsbCA9IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdmVyYjogc3RyaW5nLCBwdWJsaWMgdXJsOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXHJcblxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlcS5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5vblByb2dyZXNzICE9PSBudWxsICYmIGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uUHJvZ3Jlc3MuYXBwbHkoc2VsZiwgW2V2dC5sb2FkZWQgLyBldnQudG90YWxdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHNlbGYub25TdWNjZXNzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uU3VjY2Vzcy5hcHBseShzZWxmLCBbc2VsZi5yZXEucmVzcG9uc2VdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWxmLm9uQ29tcGxldGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYub25Db21wbGV0ZS5hcHBseShzZWxmLCBbc2VsZi5yZXEucmVzcG9uc2VdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IGVycm9ySGFuZGxlciA9IChldnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5vbkVycm9yICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uRXJyb3IuYXBwbHkoc2VsZiwgW3NlbGYucmVxLnJlc3BvbnNlXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5vbkNvbXBsZXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uQ29tcGxldGUuYXBwbHkoc2VsZiwgW3NlbGYucmVxLnJlc3BvbnNlXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZXEuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGVycm9ySGFuZGxlcilcclxuICAgICAgICB0aGlzLnJlcS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZXJyb3JIYW5kbGVyKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQodXJsOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEhUVFAoXCJHRVRcIiwgdXJsKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwb3N0KHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIVFRQKFwiUE9TVFwiLCB1cmwpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHB1dCh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSFRUUChcIlBVVFwiLCB1cmwpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhdGNoKHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIVFRQKFwiUEFUQ0hcIiwgdXJsKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZWxldGUodXJsOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEhUVFAoXCJERUxFVEVcIiwgdXJsKVxyXG4gICAgfVxyXG5cclxuICAgIHN1Y2Nlc3MoaGFuZGxlcjogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIShoYW5kbGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJIVFRQIHJlcXVlc3Qgc3VjY2VzcyBoYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblN1Y2Nlc3MgPSBoYW5kbGVyXHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBlcnJvcihoYW5kbGVyOiAocmVzcG9uc2U6IGFueSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmICghKGhhbmRsZXIgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkhUVFAgcmVxdWVzdCBlcnJvciBoYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkVycm9yID0gaGFuZGxlclxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgZmluYWxseShoYW5kbGVyOiAocmVzcG9uc2U6IGFueSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmICghKGhhbmRsZXIgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkhUVFAgcmVxdWVzdCBjb21wbGV0ZSBoYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlID0gaGFuZGxlclxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgcHJvZ3Jlc3MoaGFuZGxlcjogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIShoYW5kbGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJIVFRQIHJlcXVlc3QgcHJvZ3Jlc3MgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25Qcm9ncmVzcyA9IGhhbmRsZXJcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3BvbnNlVHlwZSh0eTogWE1MSHR0cFJlcXVlc3RSZXNwb25zZVR5cGUpIHtcclxuICAgICAgICB0aGlzLnJlcS5yZXNwb25zZVR5cGUgPSB0eVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgc2VuZCgpIHtcclxuICAgICAgICB0aGlzLnJlcS5vcGVuKHRoaXMudmVyYiwgdGhpcy51cmwpXHJcbiAgICAgICAgdGhpcy5yZXEuc2VuZCgpXHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxufVxyXG4iLCIvLyBGcmVlLXN0YW5kaW5nIGZ1bmN0aW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmc6IGFueSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc051bWJlcihudW06IGFueSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAodHlwZW9mIG51bSA9PT0gJ251bWJlcicpID8gbnVtIC0gbnVtID09PSAwIDogZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHhvcihhOiBib29sZWFuLCBiOiBib29sZWFuKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIChhICYmICFiKSB8fCAoIWEgJiYgYik7XHJcbn1cclxuXHJcblxyXG4vLyBPYmplY3QgZXh0ZW5zaW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZGVjbGFyZSBpbnRlcmZhY2UgT2JqZWN0IHtcclxuXHRkZWVwQ29weShvYmo6IGFueSk6IGFueVxyXG59XHJcblxyXG5PYmplY3QuZGVlcENvcHkgPSBmdW5jdGlvbihvYmopIHtcclxuXHRpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiAob2JqKSAhPT0gJ29iamVjdCcgfHwgJ19faXNBY3RpdmVDbG9uZV9fJyBpbiBvYmopIHsgcmV0dXJuIG9iaiB9XHJcblxyXG5cdGxldCB0ZW1wID0gb2JqIGluc3RhbmNlb2YgRGF0ZSA/IG5ldyBEYXRlKG9iaikgOiBvYmouY29uc3RydWN0b3IoKVxyXG5cclxuICAgIGZvciAobGV0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICBvYmpbJ19faXNBY3RpdmVDbG9uZV9fJ10gPSBudWxsXHJcbiAgICAgICAgICAgIHRlbXBba2V5XSA9IE9iamVjdC5kZWVwQ29weShvYmpba2V5XSlcclxuICAgICAgICAgICAgZGVsZXRlIG9ialsnX19pc0FjdGl2ZUNsb25lX18nXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0ZW1wXHJcbn1cclxuXHJcblxyXG4vLyBXZWlnaHRlZCByYW5kb20gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY2xhc3MgV2VpZ2h0ZWRSYW5kb208VD4ge1xyXG5cdGR1cGVkOiBBcnJheTxUPnxudWxsID0gbnVsbFxyXG5cclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgd2VpZ2h0czogQXJyYXk8eyB3ZWlnaHQ6IG51bWJlciwgdmFsdWU6IFQgfT4pIHsgfVxyXG5cclxuXHRzYW1wbGUoKTogVCB7XHJcblx0XHRpZiAodGhpcy5kdXBlZCA9PT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmR1cGVkID0gW11cclxuXHRcdFx0Zm9yIChsZXQgdyBvZiB0aGlzLndlaWdodHMpIHtcclxuXHRcdFx0XHRmb3IgKGxldCBfIG9mIFsuLi5BcnJheSh3LndlaWdodCldKSB7IHRoaXMuZHVwZWQucHVzaCh3LnZhbHVlKSB9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGxldCByb2xsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5kdXBlZC5sZW5ndGgpXHJcblx0XHRyZXR1cm4gdGhpcy5kdXBlZFtyb2xsXVxyXG5cdH1cclxufVxyXG4iLCIvLyBNYXRoIGV4dGVuc2lvbnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbmRlY2xhcmUgaW50ZXJmYWNlIE1hdGgge1xyXG4gICAgY2xhbXAoeDogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXJcclxuICAgIGxlcnAoYTogbnVtYmVyLCBiOiBudW1iZXIsIHg6IG51bWJlcik6IG51bWJlclxyXG4gICAgcmFuZG9tUG9pbnRJbkNpcmNsZSgpOiBbbnVtYmVyLCBudW1iZXJdXHJcbiAgICByYW5kb21Ob3JtYWxEZXZpYXRlKCk6IG51bWJlclxyXG4gICAgcmFuZG9tR2FtbWFEZXZpYXRlKHNoYXBlPzogbnVtYmVyKTogbnVtYmVyXHJcbiAgICBiZXRhU2FtcGxlKG1lYW46IG51bWJlciwgdmFyaWFuY2U6IG51bWJlcik6IG51bWJlclxyXG4gICAgcmFuZG9tSW50UmFuZ2VJbmNsdXNpdmUobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyXHJcbn1cclxuXHJcblxyXG5NYXRoLmNsYW1wID0gZnVuY3Rpb24oeDogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG5cdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChtaW4sIHgpLCBtYXgpXHJcbn1cclxuXHJcblxyXG5NYXRoLmxlcnAgPSBmdW5jdGlvbihhOiBudW1iZXIsIGI6IG51bWJlciwgeDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gKGEgKiAoMS14KSkgKyAoYiAqIHgpXHJcbn1cclxuXHJcblxyXG5NYXRoLnJhbmRvbVBvaW50SW5DaXJjbGUgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBhbmdsZSA9IE1hdGgucmFuZG9tKCkgKiAyLjAgKiBNYXRoLlBJXHJcbiAgICBsZXQgciA9IE1hdGgucmFuZG9tKCkgKyBNYXRoLnJhbmRvbSgpXHJcbiAgICBpZiAociA+IDEpIHsgciA9IDIgLSByOyB9XHJcbiAgICByZXR1cm4gW3IgKiBNYXRoLmNvcyhhbmdsZSksIHIgKiBNYXRoLnNpbihhbmdsZSldXHJcbn1cclxuXHJcblxyXG5NYXRoLnJhbmRvbU5vcm1hbERldmlhdGUgPSBmdW5jdGlvbigpOiBudW1iZXIge1xyXG5cdGxldCB1LCB2LCBxXHJcblx0ZG8ge1xyXG5cdFx0dSA9IE1hdGgucmFuZG9tKClcclxuXHRcdHYgPSAxLjcxNTYgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSlcclxuXHRcdGxldCB4ID0gdSAtIDAuNDQ5ODcxXHJcblx0XHRsZXQgeSA9IE1hdGguYWJzKHYpICsgMC4zODY1OTVcclxuXHRcdHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeClcclxuXHR9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKVxyXG5cdHJldHVybiB2IC8gdVxyXG59XHJcblxyXG5cclxuTWF0aC5yYW5kb21HYW1tYURldmlhdGUgPSBmdW5jdGlvbihzaGFwZT86IG51bWJlcik6IG51bWJlciB7XHJcbiAgaWYgKHNoYXBlID09PSB1bmRlZmluZWQpXHJcbiAgICBzaGFwZSA9IDFcclxuICBsZXQgb2FscGggPSBzaGFwZVxyXG4gIGxldCB1ID0gMFxyXG4gIGxldCB2ID0gMFxyXG4gIGxldCB4ID0gMFxyXG4gIGlmIChzaGFwZSA8IDEpXHJcbiAgICBzaGFwZSArPSAxXHJcbiAgbGV0IGExID0gc2hhcGUgLSAxIC8gM1xyXG4gIGxldCBhMiA9IDEgLyBNYXRoLnNxcnQoOSAqIGExKVxyXG4gIGRvIHtcclxuICAgIGRvIHtcclxuICAgICAgeCA9IE1hdGgucmFuZG9tTm9ybWFsRGV2aWF0ZSgpXHJcbiAgICAgIHYgPSAxICsgYTIgKiB4XHJcbiAgICB9IHdoaWxlKHYgPD0gMClcclxuICAgIHYgPSB2ICogdiAqIHZcclxuICAgIHUgPSBNYXRoLnJhbmRvbSgpXHJcbiAgfSB3aGlsZSh1ID4gMSAtIDAuMzMxICogTWF0aC5wb3coeCwgNCkgJiYgTWF0aC5sb2codSkgPiAwLjUgKiB4KnggKyBhMSAqICgxIC0gdiArIE1hdGgubG9nKHYpKSlcclxuICAvLyBhbHBoYSA+IDFcclxuICBpZiAoc2hhcGUgPT0gb2FscGgpXHJcbiAgICByZXR1cm4gYTEgKiB2XHJcbiAgLy8gYWxwaGEgPCAxXHJcbiAgZG8ge1xyXG4gICAgdSA9IE1hdGgucmFuZG9tKClcclxuICB9IHdoaWxlKHUgPT09IDApXHJcbiAgcmV0dXJuIE1hdGgucG93KHUsIDEgLyBvYWxwaCkgKiBhMSAqIHZcclxufVxyXG5cclxuXHJcbi8vIFJldHVybnMgYSByYW5kb20gc2FtcGxlIGZyb20gYSBiZXRhIGRpc3RyaWJ1dGlvbiB3aXRoIHRoZSBnaXZlbiBtZWFuIGFuZCB2YXJpYW5jZS5cclxuLy8gMCB2YXJpYW5jZSBpcyB1bmRlZmluZWRcclxuLy8gdiA9IDAgdG8gMC4zNSBpcyBhIGJlbGwgY3VydmVcclxuLy8gdiB+PSAwLjM1IGlzIHVuaWZvcm1cclxuLy8gdiA+IDAuMzUgaXMgYW4gaW52ZXJzZSBiZWxsIGN1cnZlXHJcbk1hdGguYmV0YVNhbXBsZSA9IGZ1bmN0aW9uKG1lYW4sIHZhcmlhbmNlKSB7XHJcbiAgICBsZXQgbiA9IChtZWFuICogKDEuMCAtIG1lYW4pKSAvICh2YXJpYW5jZSAqIHZhcmlhbmNlKVxyXG4gICAgbGV0IGFscGhhID0gbWVhbiAqIG5cclxuICAgIGxldCBiZXRhID0gKDEuMCAtIG1lYW4pICogblxyXG4gICAgbGV0IHUgPSBNYXRoLnJhbmRvbUdhbW1hRGV2aWF0ZShhbHBoYSlcclxuICAgIHJldHVybiB1IC8gKHUgKyBNYXRoLnJhbmRvbUdhbW1hRGV2aWF0ZShiZXRhKSlcclxufVxyXG5cclxuXHJcbk1hdGgucmFuZG9tSW50UmFuZ2VJbmNsdXNpdmUgPSBmdW5jdGlvbihtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcclxuXHRtaW4gPSBNYXRoLnRydW5jKG1pbilcclxuXHRtYXggPSBNYXRoLnRydW5jKG1heCkgKyAxXHJcblx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXgtbWluKSkgKyBtaW5cclxufSIsIi8vIFN0cmluZyBleHRlbnNpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuZGVjbGFyZSBpbnRlcmZhY2UgU3RyaW5nIHtcclxuICAgIHRvVGl0bGVDYXNlKCk6IFN0cmluZ1xyXG4gICAgdG9TbmFrZUNhc2UoKTogU3RyaW5nXHJcbiAgICBsYXN0KCk6IFN0cmluZ1xyXG59XHJcblxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS50b1RpdGxlQ2FzZSA9IGZ1bmN0aW9uKCk6IFN0cmluZyB7XHJcblx0bGV0IGNoYXJzID0gWy4uLnRoaXNdXHJcblx0bGV0IHJlc3VsdCA9IGNoYXJzLnNoaWZ0KCkudG9VcHBlckNhc2UoKVxyXG5cdGxldCBhZnRlclNwYWNlID0gZmFsc2VcclxuXHRmb3IgKGxldCBjIG9mIGNoYXJzKSB7XHJcblx0XHRpZiAoYyA9PT0gXCIgXCIgfHwgYyA9PT0gXCJfXCIpIHtcclxuXHRcdFx0YWZ0ZXJTcGFjZSA9IHRydWVcclxuXHRcdFx0cmVzdWx0ICs9IFwiIFwiXHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0aWYgKGFmdGVyU3BhY2UpIHtcclxuXHRcdFx0XHRyZXN1bHQgKz0gYy50b1VwcGVyQ2FzZSgpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0ICs9IGMudG9Mb3dlckNhc2UoKVxyXG5cdFx0XHR9XHJcblx0XHRcdGFmdGVyU3BhY2UgPSBmYWxzZVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gcmVzdWx0XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUudG9TbmFrZUNhc2UgPSBmdW5jdGlvbigpOiBTdHJpbmcge1xyXG5cdHJldHVybiB0aGlzLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbChcIiBcIiwgXCJfXCIpXHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uKCk6IFN0cmluZyB7IHJldHVybiBbLi4udGhpc10ubGFzdCgpIH0iXX0=
