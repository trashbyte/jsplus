(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
// Array constructor extensions ////////////////////////////////////////////////
Array.range = function (end) {
    return Array.range(0, end);
};
Array.range = function (start, end) {
    let result = [];
    if (end < start) {
        [start, end] = [end, start];
    }
    for (let i = start; i < end; ++i) {
        result.push(i);
    }
    return result;
};
Array.generate = function (n, func) {
    return Array.range(n).map(func);
};
Array.prototype.groupsOf = function (n) {
    let result = [];
    let group = [];
    for (let i = 0; i < this.length; ++i) {
        group.push(this[i]);
        if (i % n == n - 1) {
            result.push(group);
            group = [];
        }
    }
    if (group.length > 0) {
        result.push(group);
    }
    return result;
};
Array.prototype.last = function () {
    return this.length > 0 ? this[this.length - 1] : null;
};
Array.prototype.sample = function () {
    return this[Math.floor(Math.random() * this.length)];
};
Array.prototype.sampleAndRemove = function () {
    let result = this.sample();
    this.remove(result);
    return result;
};
Array.prototype.min = function () {
    if (this.length < 1) {
        throw "Array.min() called on empty array.";
    }
    let min = this[0];
    for (let i = 1; i < this.length; ++i) {
        if (this[i] < min) {
            min = this[i];
        }
    }
    return min;
};
Array.prototype.max = function () {
    if (this.length < 1) {
        throw "Array.max() called on empty array.";
    }
    let max = this[0];
    for (let i = 1; i < this.length; ++i) {
        if (this[i] > max) {
            max = this[i];
        }
    }
    return max;
};
Array.prototype.range = function () {
    return this.length > 0 ? (this.max() - this.min()) : 0;
};
Array.prototype.remove = function (elem) {
    let i = 0;
    while (i < this.length) {
        if (this[i] == elem) {
            this.splice(i, 1);
        }
        else {
            ++i;
        }
    }
};
Array.prototype.removeExact = function (elem) {
    let i = 0;
    while (i < this.length) {
        if (this[i] === elem) {
            this.splice(i, 1);
        }
        else {
            ++i;
        }
    }
};
},{}],2:[function(require,module,exports){
// everybody's gotta have a dollar sign shortcut thing right
window.$ = {
    onload: (handler) => {
        if (document.readyState === "complete") {
            // ensures the handler runs even if $.onload is called after the window onload event fires
            handler(null);
        }
        else
            window.addEventListener("load", handler);
    },
    q: (selector) => document.querySelector(selector),
    qa: (selector) => document.querySelectorAll(selector)
};
},{}],3:[function(require,module,exports){
// Element builder /////////////////////////////////////////////////////////////
const SVGNS = "http://www.w3.org/2000/svg";
class Elem {
    constructor(tagName) {
        this.classes = [];
        this.styles = [];
        this.attrs = [];
        this.events = new Map();
        this.parent = null;
        this.id = null;
        this.src = null;
        this.text = null;
        this.tagName = tagName;
    }
    withStyle(rule, value) {
        this.styles.push([rule, value]);
        return this;
    }
    withClass(cls, ...more) {
        this.classes.push(cls);
        more.forEach(c => this.classes.push(c));
        return this;
    }
    withClassIf(predicate, cls, ...more) {
        if (predicate) {
            this.classes.push(cls);
            more.forEach(c => this.classes.push(c));
        }
        return this;
    }
    childOf(parent) {
        this.parent = parent;
        return this;
    }
    withId(id) {
        this.id = id;
        return this;
    }
    withText(text) {
        this.text = text.replaceAll('&', '&amp;')
            .replaceAll('<', '&lt;')
            .replaceAll('>', '&gt;')
            .replaceAll('"', '&quot;')
            .replaceAll("'", '&#039;');
        return this;
    }
    withHtml(html) {
        this.text = html;
        return this;
    }
    withSrc(src) {
        this.src = src;
        return this;
    }
    withAttr(attr, value) {
        this.attrs.push([attr, value]);
        return this;
    }
    on(event, handler) {
        this.events.set(event, handler);
        return this;
    }
    buildNS(ns) {
        let e = document.createElementNS(ns, this.tagName);
        this.classes.forEach(c => e.classList.add(c));
        this.attrs.forEach(([attr, value]) => e.setAttribute(attr, value));
        this.styles.forEach(([rule, value]) => e.style.setProperty(rule, value));
        if (this.id !== null) {
            e.id = this.id;
        }
        if (this.text !== null) {
            e.textContent = this.text;
        }
        if (this.src !== null) {
            e.src = this.src;
        }
        if (this.parent !== null) {
            this.parent.appendChild(e);
        }
        for (let event in this.events) {
            e.addEventListener(event, this.events.get(event), false);
        }
        return e;
    }
    build() {
        let e = document.createElement(this.tagName);
        this.classes.forEach(c => e.classList.add(c));
        this.attrs.forEach(([attr, value]) => e.setAttribute(attr, value));
        this.styles.forEach(([rule, value]) => e.style.setProperty(rule, value));
        if (this.id !== null) {
            e.id = this.id;
        }
        if (this.text !== null) {
            e.textContent = this.text;
        }
        if (this.src !== null) {
            e.src = this.src;
        }
        if (this.parent !== null) {
            this.parent.appendChild(e);
        }
        for (let event in this.events) {
            e.addEventListener(event, this.events.get(event), false);
        }
        return e;
    }
}
},{}],4:[function(require,module,exports){
// HTTP ////////////////////////////////////////////////////////////////////////////////////////////
// TODO: status codes, body/params, timeout, headers
//HTTP.get("example.com")
//	.urlParams([["q", "src"], ["id", "0"]])
//	.body({})
//	.contentType("")
//	.header("", "")
//	.header("", "")
//	.timeout(0)
class HTTP {
    constructor(verb, url) {
        this.verb = verb;
        this.url = url;
        this.onProgress = null;
        this.onSuccess = null;
        this.onError = null;
        this.onComplete = null;
        this.req = new XMLHttpRequest();
        let self = this;
        this.req.addEventListener("progress", (evt) => {
            if (self.onProgress !== null && evt.lengthComputable) {
                self.onProgress.apply(self, [evt.loaded / evt.total]);
            }
        });
        this.req.addEventListener("load", (evt) => {
            if (self.onSuccess !== null) {
                self.onSuccess.apply(self, [self.req.response]);
            }
            if (self.onComplete !== null) {
                self.onComplete.apply(self, [self.req.response]);
            }
        });
        let errorHandler = (evt) => {
            if (self.onError !== null) {
                self.onError.apply(self, [self.req.response]);
            }
            if (self.onComplete !== null) {
                self.onComplete.apply(self, [self.req.response]);
            }
        };
        this.req.addEventListener("error", errorHandler);
        this.req.addEventListener("abort", errorHandler);
    }
    static get(url) {
        return new HTTP("GET", url);
    }
    static post(url) {
        return new HTTP("POST", url);
    }
    static put(url) {
        return new HTTP("PUT", url);
    }
    static patch(url) {
        return new HTTP("PATCH", url);
    }
    static delete(url) {
        return new HTTP("DELETE", url);
    }
    success(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request success handler must be a function.");
        }
        this.onSuccess = handler;
        return this;
    }
    error(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request error handler must be a function.");
        }
        this.onError = handler;
        return this;
    }
    finally(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request complete handler must be a function.");
        }
        this.onComplete = handler;
        return this;
    }
    progress(handler) {
        if (!(handler instanceof Function)) {
            throw new TypeError("HTTP request progress handler must be a function.");
        }
        this.onProgress = handler;
        return this;
    }
    responseType(ty) {
        this.req.responseType = ty;
        return this;
    }
    send() {
        this.req.open(this.verb, this.url);
        this.req.send();
        return this;
    }
}
},{}],5:[function(require,module,exports){
// Math extensions /////////////////////////////////////////////////////////////
Math.clamp = function (x, min, max) {
    return Math.min(Math.max(min, x), max);
};
Math.lerp = function (a, b, x) {
    return (a * (1 - x)) + (b * x);
};
Math.randomPointInCircle = function () {
    let angle = Math.random() * 2.0 * Math.PI;
    let r = Math.random() + Math.random();
    if (r > 1) {
        r = 2 - r;
    }
    return [r * Math.cos(angle), r * Math.sin(angle)];
};
Math.randomNormalDeviate = function () {
    let u, v, q;
    do {
        u = Math.random();
        v = 1.7156 * (Math.random() - 0.5);
        let x = u - 0.449871;
        let y = Math.abs(v) + 0.386595;
        q = x * x + y * (0.19600 * y - 0.25472 * x);
    } while (q > 0.27597 && (q > 0.27846 || v * v > -4 * Math.log(u) * u * u));
    return v / u;
};
Math.randomGammaDeviate = function (shape) {
    if (shape === undefined)
        shape = 1;
    let oalph = shape;
    let u = 0;
    let v = 0;
    let x = 0;
    if (shape < 1)
        shape += 1;
    let a1 = shape - 1 / 3;
    let a2 = 1 / Math.sqrt(9 * a1);
    do {
        do {
            x = Math.randomNormalDeviate();
            v = 1 + a2 * x;
        } while (v <= 0);
        v = v * v * v;
        u = Math.random();
    } while (u > 1 - 0.331 * Math.pow(x, 4) && Math.log(u) > 0.5 * x * x + a1 * (1 - v + Math.log(v)));
    // alpha > 1
    if (shape == oalph)
        return a1 * v;
    // alpha < 1
    do {
        u = Math.random();
    } while (u === 0);
    return Math.pow(u, 1 / oalph) * a1 * v;
};
// Returns a random sample from a beta distribution with the given mean and variance.
// 0 variance is undefined
// v = 0 to 0.35 is a bell curve
// v ~= 0.35 is uniform
// v > 0.35 is an inverse bell curve
Math.betaSample = function (mean, variance) {
    let n = (mean * (1.0 - mean)) / (variance * variance);
    let alpha = mean * n;
    let beta = (1.0 - mean) * n;
    let u = Math.randomGammaDeviate(alpha);
    return u / (u + Math.randomGammaDeviate(beta));
};
Math.randomIntRangeInclusive = function (min, max) {
    min = Math.trunc(min);
    max = Math.trunc(max) + 1;
    return Math.floor(Math.random() * (max - min)) + min;
};
},{}],6:[function(require,module,exports){
// Free-standing functions /////////////////////////////////////////////////////
function isFunction(arg) {
    return toString.call(arg) === '[object Function]';
}
function isNumber(num) {
    return (typeof num === 'number') ? num - num === 0 : false;
}
function xor(a, b) {
    return (a && !b) || (!a && b);
}
Object.deepCopy = function (obj) {
    if (obj === null || typeof (obj) !== 'object' || '__isActiveClone__' in obj) {
        return obj;
    }
    let temp = obj instanceof Date ? new Date(obj) : obj.constructor();
    for (let key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            obj['__isActiveClone__'] = null;
            temp[key] = Object.deepCopy(obj[key]);
            delete obj['__isActiveClone__'];
        }
    }
    return temp;
};
// Weighted random /////////////////////////////////////////////////////////////
class WeightedRandom {
    constructor(weights) {
        this.weights = weights;
        this.duped = null;
    }
    sample() {
        if (this.duped === null) {
            this.duped = [];
            for (let w of this.weights) {
                for (let _ of [...Array(w.weight)]) {
                    this.duped.push(w.value);
                }
            }
        }
        let roll = Math.floor(Math.random() * this.duped.length);
        return this.duped[roll];
    }
}
},{}],7:[function(require,module,exports){
// String extensions ///////////////////////////////////////////////////////////
String.prototype.toTitleCase = function () {
    let chars = [...this];
    let result = chars.shift().toUpperCase();
    let afterSpace = false;
    for (let c of chars) {
        if (c === " " || c === "_") {
            afterSpace = true;
            result += " ";
        }
        else {
            if (afterSpace) {
                result += c.toUpperCase();
            }
            else {
                result += c.toLowerCase();
            }
            afterSpace = false;
        }
    }
    return result;
};
String.prototype.toSnakeCase = function () {
    return this.toLowerCase().replaceAll(" ", "_");
};
String.prototype.last = function () { return [...this].last(); };
},{}]},{},[1,2,3,4,5,6,7])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXJyYXkudHMiLCJzcmMvZG9sbGFyLnRzIiwic3JjL2VsZW0udHMiLCJzcmMvaHR0cC50cyIsInNyYy9tYXRoLnRzIiwic3JjL21pc2MudHMiLCJzcmMvc3RyaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsZ0ZBQWdGO0FBU2hGLEtBQUssQ0FBQyxLQUFLLEdBQUcsVUFBUyxHQUFXO0lBQ2pDLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUE7QUFDM0IsQ0FBQyxDQUFBO0FBR0QsS0FBSyxDQUFDLEtBQUssR0FBRyxVQUFTLEtBQWEsRUFBRSxHQUFXO0lBQ2hELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQTtJQUNaLElBQUksR0FBRyxHQUFHLEtBQUssRUFBRTtRQUNiLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0tBQzlCO0lBQ0QsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRTtRQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQ2pCO0lBQ0osT0FBTyxNQUFNLENBQUE7QUFDZCxDQUFDLENBQUE7QUFHRCxLQUFLLENBQUMsUUFBUSxHQUFHLFVBQVksQ0FBUyxFQUFFLElBQXdCO0lBQy9ELE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7QUFDaEMsQ0FBQyxDQUFBO0FBbUJELEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVMsQ0FBUztJQUM1QyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUE7SUFDZixJQUFJLEtBQUssR0FBRyxFQUFFLENBQUE7SUFDZCxLQUFLLElBQUks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S0FBSyxTQUFTO1FBQ3JCLEtBQUssR0FBRyxDQUFDLENBQUE7SUFDWCxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ1QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ1QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ1QsSUFBSSxLQUFLLEdBQUcsQ0FBQztRQUNYLEtBQUssSUFBSSxDQUFDLENBQUE7SUFDWixJQUFJLEVBQUUsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QixJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUE7SUFDOUIsR0FBRztRQUNELEdBQUc7WUFDRCxDQUFDLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUE7WUFDOUIsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFBO1NBQ2YsUUFBTyxDQUFDLElBQUksQ0FBQyxFQUFDO1FBQ2YsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2IsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtLQUNsQixRQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUM7SUFDL0YsWUFBWTtJQUNaLElBQUksS0FBSyxJQUFJLEtBQUs7UUFDaEIsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0lBQ2YsWUFBWTtJQUNaLEdBQUc7UUFDRCxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0s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SSxDQUFBO1lBQ2pCLE1BQU0sSUFBSSxHQUFHLENBQUE7U0FDYjthQUNJO1lBQ0osSUFBSSxVQUFVLEVBQUU7Z0JBQ2YsTUFBTSxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTthQUN6QjtpQkFDSTtnQkFDSixNQUFNLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO2FBQ3pCO1lBQ0QsVUFBVSxHQUFHLEtBQUssQ0FBQTtTQUNsQjtLQUNEO0lBQ0QsT0FBTyxNQUFNLENBQUE7QUFDZCxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRztJQUM5QixPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0FBQy9DLENBQUMsQ0FBQTtBQUVELE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLGNBQXFCLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gQXJyYXkgY29uc3RydWN0b3IgZXh0ZW5zaW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG5kZWNsYXJlIGludGVyZmFjZSBBcnJheUNvbnN0cnVjdG9yIHtcclxuICAgIHJhbmdlKHN0YXJ0OiBudW1iZXIsIGVuZD86IG51bWJlcik6IEFycmF5PG51bWJlcj5cclxuICAgIGdlbmVyYXRlPFQ+KG46IG51bWJlciwgZnVuYzogKG51bTogbnVtYmVyKSA9PiBUKTogQXJyYXk8VD5cclxufVxyXG5cclxuXHJcbkFycmF5LnJhbmdlID0gZnVuY3Rpb24oZW5kOiBudW1iZXIpIHtcclxuXHRyZXR1cm4gQXJyYXkucmFuZ2UoMCwgZW5kKVxyXG59XHJcblxyXG5cclxuQXJyYXkucmFuZ2UgPSBmdW5jdGlvbihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IEFycmF5PG51bWJlcj4ge1xyXG5cdGxldCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKGVuZCA8IHN0YXJ0KSB7XHJcbiAgICAgICAgW3N0YXJ0LCBlbmRdID0gW2VuZCwgc3RhcnRdXHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKGkpXHJcbiAgICB9XHJcblx0cmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5cclxuQXJyYXkuZ2VuZXJhdGUgPSBmdW5jdGlvbjxUPihuOiBudW1iZXIsIGZ1bmM6IChudW06IG51bWJlcikgPT4gVCk6IEFycmF5PFQ+IHtcclxuXHRyZXR1cm4gQXJyYXkucmFuZ2UobikubWFwKGZ1bmMpXHJcbn1cclxuXHJcblxyXG4vLyBBcnJheSBleHRlbnNpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbmRlY2xhcmUgaW50ZXJmYWNlIEFycmF5PFQ+IHtcclxuICAgIGdyb3Vwc09mKG46IG51bWJlcik6IEFycmF5PEFycmF5PFQ+PlxyXG4gICAgbGFzdCgpOiBUfG51bGxcclxuICAgIHNhbXBsZSgpOiBUXHJcbiAgICBzYW1wbGVBbmRSZW1vdmUoKTogVFxyXG4gICAgbWluKCk6IG51bWJlclxyXG4gICAgbWF4KCk6IG51bWJlclxyXG4gICAgcmFuZ2UoKTogbnVtYmVyXHJcbiAgICByZW1vdmUoZWxlbTogVCk6IHZvaWRcclxuICAgIHJlbW92ZUV4YWN0KGVsZW06IFQpOiB2b2lkXHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUuZ3JvdXBzT2YgPSBmdW5jdGlvbihuOiBudW1iZXIpIHtcclxuXHRsZXQgcmVzdWx0ID0gW11cclxuXHRsZXQgZ3JvdXAgPSBbXVxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xyXG5cdFx0Z3JvdXAucHVzaCh0aGlzW2ldKVxyXG5cdFx0aWYgKGkgJSBuID09IG4tMSkge1xyXG5cdFx0XHRyZXN1bHQucHVzaChncm91cClcclxuXHRcdFx0Z3JvdXAgPSBbXVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZ3JvdXAubGVuZ3RoID4gMCkge1xyXG5cdFx0cmVzdWx0LnB1c2goZ3JvdXApXHJcblx0fVxyXG5cdHJldHVybiByZXN1bHRcclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXMubGVuZ3RoID4gMCA/IHRoaXNbdGhpcy5sZW5ndGggLSAxXSA6IG51bGxcclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCldXHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUuc2FtcGxlQW5kUmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0bGV0IHJlc3VsdCA9IHRoaXMuc2FtcGxlKClcclxuXHR0aGlzLnJlbW92ZShyZXN1bHQpXHJcblx0cmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5cclxuQXJyYXkucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubGVuZ3RoIDwgMSkgeyB0aHJvdyBcIkFycmF5Lm1pbigpIGNhbGxlZCBvbiBlbXB0eSBhcnJheS5cIjsgfVxyXG5cclxuICAgIGxldCBtaW4gPSB0aGlzWzBdO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPCBtaW4pIHtcclxuICAgICAgICAgICAgbWluID0gdGhpc1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1pbjtcclxufVxyXG5cclxuXHJcbkFycmF5LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmxlbmd0aCA8IDEpIHsgdGhyb3cgXCJBcnJheS5tYXgoKSBjYWxsZWQgb24gZW1wdHkgYXJyYXkuXCI7IH1cclxuXHJcbiAgICBsZXQgbWF4ID0gdGhpc1swXTtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmICh0aGlzW2ldID4gbWF4KSB7XHJcbiAgICAgICAgICAgIG1heCA9IHRoaXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtYXg7XHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUucmFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDAgPyAodGhpcy5tYXgoKSAtIHRoaXMubWluKCkpIDogMFxyXG59XHJcblxyXG5cclxuQXJyYXkucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgIGxldCBpID0gMFxyXG4gICAgd2hpbGUgKGkgPCB0aGlzLmxlbmd0aCkge1xyXG4gICAgXHRpZiAodGhpc1tpXSA9PSBlbGVtKSB7IHRoaXMuc3BsaWNlKGksIDEpIH1cclxuICAgIFx0ZWxzZSB7ICsraSB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUucmVtb3ZlRXhhY3QgPSBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICBsZXQgaSA9IDBcclxuICAgIHdoaWxlIChpIDwgdGhpcy5sZW5ndGgpIHtcclxuICAgIFx0aWYgKHRoaXNbaV0gPT09IGVsZW0pIHsgdGhpcy5zcGxpY2UoaSwgMSkgfVxyXG4gICAgXHRlbHNlIHsgKytpIH1cclxuICAgIH1cclxufSIsIi8vIGV2ZXJ5Ym9keSdzIGdvdHRhIGhhdmUgYSBkb2xsYXIgc2lnbiBzaG9ydGN1dCB0aGluZyByaWdodFxyXG5cclxuZGVjbGFyZSBpbnRlcmZhY2UgV2luZG93IHtcclxuXHQkOiBhbnlcclxufVxyXG5cclxud2luZG93LiQgPSB7XHJcblx0b25sb2FkOiAoaGFuZGxlcjogKGU6IEV2ZW50KSA9PiB2b2lkKTogdm9pZCA9PiB7XHJcblx0XHRpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XHJcblx0XHRcdC8vIGVuc3VyZXMgdGhlIGhhbmRsZXIgcnVucyBldmVuIGlmICQub25sb2FkIGlzIGNhbGxlZCBhZnRlciB0aGUgd2luZG93IG9ubG9hZCBldmVudCBmaXJlc1xyXG5cdFx0XHRoYW5kbGVyKG51bGwpXHJcblx0XHR9XHJcblx0XHRlbHNlIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBoYW5kbGVyKVxyXG5cdH0sXHJcblx0cTogKHNlbGVjdG9yOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcclxuXHRxYTogKHNlbGVjdG9yOiBzdHJpbmcpOiBOb2RlTGlzdCA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxyXG59XHJcbiIsIi8vIEVsZW1lbnQgYnVpbGRlciAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuY29uc3QgU1ZHTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuXHJcblxyXG5jbGFzcyBFbGVtIHtcclxuXHR0YWdOYW1lOiBzdHJpbmdcclxuXHRjbGFzc2VzOiBBcnJheTxzdHJpbmc+ID0gW11cclxuXHRzdHlsZXM6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10+ID0gW11cclxuXHRhdHRyczogQXJyYXk8W3N0cmluZywgc3RyaW5nXT4gPSBbXVxyXG5cdGV2ZW50czogTWFwPHN0cmluZywgRnVuY3Rpb24+ID0gbmV3IE1hcCgpXHJcblx0cGFyZW50OiBIVE1MRWxlbWVudHxTVkdFbGVtZW50fG51bGwgPSBudWxsXHJcblx0aWQ6IHN0cmluZ3xudWxsID0gbnVsbFxyXG5cdHNyYzogc3RyaW5nfG51bGwgPSBudWxsXHJcblx0dGV4dDogc3RyaW5nfG51bGwgPSBudWxsXHJcblxyXG5cdGNvbnN0cnVjdG9yICh0YWdOYW1lOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMudGFnTmFtZSA9IHRhZ05hbWVcclxuXHR9XHJcblxyXG5cdHdpdGhTdHlsZShydWxlOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBFbGVtIHtcclxuXHRcdHRoaXMuc3R5bGVzLnB1c2goW3J1bGUsIHZhbHVlXSlcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cclxuXHR3aXRoQ2xhc3MoY2xzOiBzdHJpbmcsIC4uLm1vcmU6IHN0cmluZ1tdKTogRWxlbSB7XHJcblx0XHR0aGlzLmNsYXNzZXMucHVzaChjbHMpXHJcblx0XHRtb3JlLmZvckVhY2goYyA9PiB0aGlzLmNsYXNzZXMucHVzaChjKSlcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cclxuXHR3aXRoQ2xhc3NJZihwcmVkaWNhdGU6IGJvb2xlYW4sIGNsczogc3RyaW5nLCAuLi5tb3JlOiBzdHJpbmdbXSk6IEVsZW0ge1xyXG5cdFx0aWYgKHByZWRpY2F0ZSkge1xyXG5cdFx0XHR0aGlzLmNsYXNzZXMucHVzaChjbHMpXHJcblx0XHRcdG1vcmUuZm9yRWFjaChjID0+IHRoaXMuY2xhc3Nlcy5wdXNoKGMpKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblx0XHJcblx0Y2hpbGRPZihwYXJlbnQ6IEhUTUxFbGVtZW50fFNWR0VsZW1lbnQpOiBFbGVtIHtcclxuXHRcdHRoaXMucGFyZW50ID0gcGFyZW50XHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHRcclxuXHR3aXRoSWQoaWQ6IHN0cmluZyk6IEVsZW0ge1xyXG5cdFx0dGhpcy5pZCA9IGlkXHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHRcclxuXHR3aXRoVGV4dCh0ZXh0OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMudGV4dCA9IHRleHQucmVwbGFjZUFsbCgnJicsICcmYW1wOycpXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlQWxsKCc8JywgJyZsdDsnKVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZUFsbCgnPicsICcmZ3Q7JylcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2VBbGwoJ1wiJywgJyZxdW90OycpXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlQWxsKFwiJ1wiLCAnJiMwMzk7JylcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cdFxyXG5cdHdpdGhIdG1sKGh0bWw6IHN0cmluZyk6IEVsZW0ge1xyXG5cdFx0dGhpcy50ZXh0ID0gaHRtbFxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblx0XHJcblx0d2l0aFNyYyhzcmM6IHN0cmluZyk6IEVsZW0ge1xyXG5cdFx0dGhpcy5zcmMgPSBzcmNcclxuXHRcdHJldHVybiB0aGlzXHJcblx0fVxyXG5cdFxyXG5cdHdpdGhBdHRyKGF0dHI6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IEVsZW0ge1xyXG5cdFx0dGhpcy5hdHRycy5wdXNoKFthdHRyLCB2YWx1ZV0pXHJcblx0XHRyZXR1cm4gdGhpc1xyXG5cdH1cclxuXHRcclxuXHRvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbik6IEVsZW0ge1xyXG5cdFx0dGhpcy5ldmVudHMuc2V0KGV2ZW50LCBoYW5kbGVyKVxyXG5cdFx0cmV0dXJuIHRoaXNcclxuXHR9XHJcblxyXG5cdGJ1aWxkTlMobnM6IHN0cmluZyk6IEVsZW1lbnQge1xyXG5cdFx0bGV0IGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsIHRoaXMudGFnTmFtZSlcclxuXHRcdHRoaXMuY2xhc3Nlcy5mb3JFYWNoKGMgPT4gZS5jbGFzc0xpc3QuYWRkKGMpKVxyXG5cdFx0dGhpcy5hdHRycy5mb3JFYWNoKChbYXR0ciwgdmFsdWVdKSA9PiBlLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSkpXHJcblx0XHR0aGlzLnN0eWxlcy5mb3JFYWNoKChbcnVsZSwgdmFsdWVdKSA9PiAoZSBhcyBhbnkpLnN0eWxlLnNldFByb3BlcnR5KHJ1bGUsIHZhbHVlKSlcclxuXHRcdGlmICh0aGlzLmlkICE9PSBudWxsKSB7IGUuaWQgPSB0aGlzLmlkIH1cclxuXHRcdGlmICh0aGlzLnRleHQgIT09IG51bGwpIHsgZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dCB9XHJcblx0XHRpZiAodGhpcy5zcmMgIT09IG51bGwpIHsgKGUgYXMgYW55KS5zcmMgPSB0aGlzLnNyYyB9XHJcblx0XHJcblx0XHRpZiAodGhpcy5wYXJlbnQgIT09IG51bGwpIHsgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQoZSkgfVxyXG5cdFxyXG5cdFx0Zm9yIChsZXQgZXZlbnQgaW4gdGhpcy5ldmVudHMpIHtcclxuXHRcdFx0KGUgYXMgYW55KS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpLCBmYWxzZSlcclxuXHRcdH1cclxuXHRcclxuXHRcdHJldHVybiBlXHJcblx0fVxyXG5cdFxyXG5cdGJ1aWxkKCk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGxldCBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWUpXHJcblx0XHR0aGlzLmNsYXNzZXMuZm9yRWFjaChjID0+IGUuY2xhc3NMaXN0LmFkZChjKSlcclxuXHRcdHRoaXMuYXR0cnMuZm9yRWFjaCgoW2F0dHIsIHZhbHVlXSkgPT4gZS5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpKVxyXG5cdFx0dGhpcy5zdHlsZXMuZm9yRWFjaCgoW3J1bGUsIHZhbHVlXSkgPT4gZS5zdHlsZS5zZXRQcm9wZXJ0eShydWxlLCB2YWx1ZSkpXHJcblx0XHRpZiAodGhpcy5pZCAhPT0gbnVsbCkgeyBlLmlkID0gdGhpcy5pZCB9XHJcblx0XHRpZiAodGhpcy50ZXh0ICE9PSBudWxsKSB7IGUudGV4dENvbnRlbnQgPSB0aGlzLnRleHQgfVxyXG5cdFx0aWYgKHRoaXMuc3JjICE9PSBudWxsKSB7IChlIGFzIGFueSkuc3JjID0gdGhpcy5zcmMgfVxyXG5cdFxyXG5cdFx0aWYgKHRoaXMucGFyZW50ICE9PSBudWxsKSB7IHRoaXMucGFyZW50LmFwcGVuZENoaWxkKGUpIH1cclxuXHRcclxuXHRcdGZvciAobGV0IGV2ZW50IGluIHRoaXMuZXZlbnRzKSB7XHJcblx0XHRcdChlIGFzIGFueSkuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5ldmVudHMuZ2V0KGV2ZW50KSwgZmFsc2UpXHJcblx0XHR9XHJcblx0XHJcblx0XHRyZXR1cm4gZVxyXG5cdH1cclxufVxyXG4iLCIvLyBIVFRQIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vLyBUT0RPOiBzdGF0dXMgY29kZXMsIGJvZHkvcGFyYW1zLCB0aW1lb3V0LCBoZWFkZXJzXHJcbi8vSFRUUC5nZXQoXCJleGFtcGxlLmNvbVwiKVxyXG4vL1x0LnVybFBhcmFtcyhbW1wicVwiLCBcInNyY1wiXSwgW1wiaWRcIiwgXCIwXCJdXSlcclxuLy9cdC5ib2R5KHt9KVxyXG4vL1x0LmNvbnRlbnRUeXBlKFwiXCIpXHJcbi8vXHQuaGVhZGVyKFwiXCIsIFwiXCIpXHJcbi8vXHQuaGVhZGVyKFwiXCIsIFwiXCIpXHJcbi8vXHQudGltZW91dCgwKVxyXG5cclxuY2xhc3MgSFRUUCB7XHJcbiAgICByZXE6IFhNTEh0dHBSZXF1ZXN0XHJcbiAgICBvblByb2dyZXNzOiAoKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpfG51bGwgPSBudWxsXHJcbiAgICBvblN1Y2Nlc3M6ICAoKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpfG51bGwgPSBudWxsXHJcbiAgICBvbkVycm9yOiAgICAoKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpfG51bGwgPSBudWxsXHJcbiAgICBvbkNvbXBsZXRlOiAoKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpfG51bGwgPSBudWxsXHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHZlcmI6IHN0cmluZywgcHVibGljIHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5yZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxyXG5cclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZXEuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHNlbGYub25Qcm9ncmVzcyAhPT0gbnVsbCAmJiBldnQubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vblByb2dyZXNzLmFwcGx5KHNlbGYsIFtldnQubG9hZGVkIC8gZXZ0LnRvdGFsXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlcS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLm9uU3VjY2VzcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vblN1Y2Nlc3MuYXBwbHkoc2VsZiwgW3NlbGYucmVxLnJlc3BvbnNlXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5vbkNvbXBsZXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uQ29tcGxldGUuYXBwbHkoc2VsZiwgW3NlbGYucmVxLnJlc3BvbnNlXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBlcnJvckhhbmRsZXIgPSAoZXZ0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHNlbGYub25FcnJvciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yLmFwcGx5KHNlbGYsIFtzZWxmLnJlcS5yZXNwb25zZV0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlbGYub25Db21wbGV0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vbkNvbXBsZXRlLmFwcGx5KHNlbGYsIFtzZWxmLnJlcS5yZXNwb25zZV0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBlcnJvckhhbmRsZXIpXHJcbiAgICAgICAgdGhpcy5yZXEuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGVycm9ySGFuZGxlcilcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0KHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIVFRQKFwiR0VUXCIsIHVybClcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcG9zdCh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSFRUUChcIlBPU1RcIiwgdXJsKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwdXQodXJsOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEhUVFAoXCJQVVRcIiwgdXJsKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXRjaCh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSFRUUChcIlBBVENIXCIsIHVybClcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGVsZXRlKHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIVFRQKFwiREVMRVRFXCIsIHVybClcclxuICAgIH1cclxuXHJcbiAgICBzdWNjZXNzKGhhbmRsZXI6IChyZXNwb25zZTogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCEoaGFuZGxlciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSFRUUCByZXF1ZXN0IHN1Y2Nlc3MgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25TdWNjZXNzID0gaGFuZGxlclxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgZXJyb3IoaGFuZGxlcjogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIShoYW5kbGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJIVFRQIHJlcXVlc3QgZXJyb3IgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25FcnJvciA9IGhhbmRsZXJcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmFsbHkoaGFuZGxlcjogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIShoYW5kbGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJIVFRQIHJlcXVlc3QgY29tcGxldGUgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IGhhbmRsZXJcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHByb2dyZXNzKGhhbmRsZXI6IChyZXNwb25zZTogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCEoaGFuZGxlciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSFRUUCByZXF1ZXN0IHByb2dyZXNzIGhhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MgPSBoYW5kbGVyXHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgIH1cclxuXHJcbiAgICByZXNwb25zZVR5cGUodHk6IFhNTEh0dHBSZXF1ZXN0UmVzcG9uc2VUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5yZXEucmVzcG9uc2VUeXBlID0gdHlcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmQoKSB7XHJcbiAgICAgICAgdGhpcy5yZXEub3Blbih0aGlzLnZlcmIsIHRoaXMudXJsKVxyXG4gICAgICAgIHRoaXMucmVxLnNlbmQoKVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcbn1cclxuIiwiLy8gTWF0aCBleHRlbnNpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG5kZWNsYXJlIGludGVyZmFjZSBNYXRoIHtcclxuICAgIGNsYW1wKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyXHJcbiAgICBsZXJwKGE6IG51bWJlciwgYjogbnVtYmVyLCB4OiBudW1iZXIpOiBudW1iZXJcclxuICAgIHJhbmRvbVBvaW50SW5DaXJjbGUoKTogW251bWJlciwgbnVtYmVyXVxyXG4gICAgcmFuZG9tTm9ybWFsRGV2aWF0ZSgpOiBudW1iZXJcclxuICAgIHJhbmRvbUdhbW1hRGV2aWF0ZShzaGFwZT86IG51bWJlcik6IG51bWJlclxyXG4gICAgYmV0YVNhbXBsZShtZWFuOiBudW1iZXIsIHZhcmlhbmNlOiBudW1iZXIpOiBudW1iZXJcclxuICAgIHJhbmRvbUludFJhbmdlSW5jbHVzaXZlKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlclxyXG59XHJcblxyXG5cclxuTWF0aC5jbGFtcCA9IGZ1bmN0aW9uKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobWluLCB4KSwgbWF4KVxyXG59XHJcblxyXG5cclxuTWF0aC5sZXJwID0gZnVuY3Rpb24oYTogbnVtYmVyLCBiOiBudW1iZXIsIHg6IG51bWJlcik6IG51bWJlciB7XHJcblx0cmV0dXJuIChhICogKDEteCkpICsgKGIgKiB4KVxyXG59XHJcblxyXG5cclxuTWF0aC5yYW5kb21Qb2ludEluQ2lyY2xlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgYW5nbGUgPSBNYXRoLnJhbmRvbSgpICogMi4wICogTWF0aC5QSVxyXG4gICAgbGV0IHIgPSBNYXRoLnJhbmRvbSgpICsgTWF0aC5yYW5kb20oKVxyXG4gICAgaWYgKHIgPiAxKSB7IHIgPSAyIC0gcjsgfVxyXG4gICAgcmV0dXJuIFtyICogTWF0aC5jb3MoYW5nbGUpLCByICogTWF0aC5zaW4oYW5nbGUpXVxyXG59XHJcblxyXG5cclxuTWF0aC5yYW5kb21Ob3JtYWxEZXZpYXRlID0gZnVuY3Rpb24oKTogbnVtYmVyIHtcclxuXHRsZXQgdSwgdiwgcVxyXG5cdGRvIHtcclxuXHRcdHUgPSBNYXRoLnJhbmRvbSgpXHJcblx0XHR2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpXHJcblx0XHRsZXQgeCA9IHUgLSAwLjQ0OTg3MVxyXG5cdFx0bGV0IHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1XHJcblx0XHRxID0geCAqIHggKyB5ICogKDAuMTk2MDAgKiB5IC0gMC4yNTQ3MiAqIHgpXHJcblx0fSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSlcclxuXHRyZXR1cm4gdiAvIHVcclxufVxyXG5cclxuXHJcbk1hdGgucmFuZG9tR2FtbWFEZXZpYXRlID0gZnVuY3Rpb24oc2hhcGU/OiBudW1iZXIpOiBudW1iZXIge1xyXG4gIGlmIChzaGFwZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgc2hhcGUgPSAxXHJcbiAgbGV0IG9hbHBoID0gc2hhcGVcclxuICBsZXQgdSA9IDBcclxuICBsZXQgdiA9IDBcclxuICBsZXQgeCA9IDBcclxuICBpZiAoc2hhcGUgPCAxKVxyXG4gICAgc2hhcGUgKz0gMVxyXG4gIGxldCBhMSA9IHNoYXBlIC0gMSAvIDNcclxuICBsZXQgYTIgPSAxIC8gTWF0aC5zcXJ0KDkgKiBhMSlcclxuICBkbyB7XHJcbiAgICBkbyB7XHJcbiAgICAgIHggPSBNYXRoLnJhbmRvbU5vcm1hbERldmlhdGUoKVxyXG4gICAgICB2ID0gMSArIGEyICogeFxyXG4gICAgfSB3aGlsZSh2IDw9IDApXHJcbiAgICB2ID0gdiAqIHYgKiB2XHJcbiAgICB1ID0gTWF0aC5yYW5kb20oKVxyXG4gIH0gd2hpbGUodSA+IDEgLSAwLjMzMSAqIE1hdGgucG93KHgsIDQpICYmIE1hdGgubG9nKHUpID4gMC41ICogeCp4ICsgYTEgKiAoMSAtIHYgKyBNYXRoLmxvZyh2KSkpXHJcbiAgLy8gYWxwaGEgPiAxXHJcbiAgaWYgKHNoYXBlID09IG9hbHBoKVxyXG4gICAgcmV0dXJuIGExICogdlxyXG4gIC8vIGFscGhhIDwgMVxyXG4gIGRvIHtcclxuICAgIHUgPSBNYXRoLnJhbmRvbSgpXHJcbiAgfSB3aGlsZSh1ID09PSAwKVxyXG4gIHJldHVybiBNYXRoLnBvdyh1LCAxIC8gb2FscGgpICogYTEgKiB2XHJcbn1cclxuXHJcblxyXG4vLyBSZXR1cm5zIGEgcmFuZG9tIHNhbXBsZSBmcm9tIGEgYmV0YSBkaXN0cmlidXRpb24gd2l0aCB0aGUgZ2l2ZW4gbWVhbiBhbmQgdmFyaWFuY2UuXHJcbi8vIDAgdmFyaWFuY2UgaXMgdW5kZWZpbmVkXHJcbi8vIHYgPSAwIHRvIDAuMzUgaXMgYSBiZWxsIGN1cnZlXHJcbi8vIHYgfj0gMC4zNSBpcyB1bmlmb3JtXHJcbi8vIHYgPiAwLjM1IGlzIGFuIGludmVyc2UgYmVsbCBjdXJ2ZVxyXG5NYXRoLmJldGFTYW1wbGUgPSBmdW5jdGlvbihtZWFuLCB2YXJpYW5jZSkge1xyXG4gICAgbGV0IG4gPSAobWVhbiAqICgxLjAgLSBtZWFuKSkgLyAodmFyaWFuY2UgKiB2YXJpYW5jZSlcclxuICAgIGxldCBhbHBoYSA9IG1lYW4gKiBuXHJcbiAgICBsZXQgYmV0YSA9ICgxLjAgLSBtZWFuKSAqIG5cclxuICAgIGxldCB1ID0gTWF0aC5yYW5kb21HYW1tYURldmlhdGUoYWxwaGEpXHJcbiAgICByZXR1cm4gdSAvICh1ICsgTWF0aC5yYW5kb21HYW1tYURldmlhdGUoYmV0YSkpXHJcbn1cclxuXHJcblxyXG5NYXRoLnJhbmRvbUludFJhbmdlSW5jbHVzaXZlID0gZnVuY3Rpb24obWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XHJcblx0bWluID0gTWF0aC50cnVuYyhtaW4pXHJcblx0bWF4ID0gTWF0aC50cnVuYyhtYXgpICsgMVxyXG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4LW1pbikpICsgbWluXHJcbn0iLCIvLyBGcmVlLXN0YW5kaW5nIGZ1bmN0aW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmc6IGFueSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc051bWJlcihudW06IGFueSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAodHlwZW9mIG51bSA9PT0gJ251bWJlcicpID8gbnVtIC0gbnVtID09PSAwIDogZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHhvcihhOiBib29sZWFuLCBiOiBib29sZWFuKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIChhICYmICFiKSB8fCAoIWEgJiYgYik7XHJcbn1cclxuXHJcblxyXG4vLyBPYmplY3QgZXh0ZW5zaW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZGVjbGFyZSBpbnRlcmZhY2UgT2JqZWN0IHtcclxuXHRkZWVwQ29weShvYmo6IGFueSk6IGFueVxyXG59XHJcblxyXG5PYmplY3QuZGVlcENvcHkgPSBmdW5jdGlvbihvYmopIHtcclxuXHRpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiAob2JqKSAhPT0gJ29iamVjdCcgfHwgJ19faXNBY3RpdmVDbG9uZV9fJyBpbiBvYmopIHsgcmV0dXJuIG9iaiB9XHJcblxyXG5cdGxldCB0ZW1wID0gb2JqIGluc3RhbmNlb2YgRGF0ZSA/IG5ldyBEYXRlKG9iaikgOiBvYmouY29uc3RydWN0b3IoKVxyXG5cclxuICAgIGZvciAobGV0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICBvYmpbJ19faXNBY3RpdmVDbG9uZV9fJ10gPSBudWxsXHJcbiAgICAgICAgICAgIHRlbXBba2V5XSA9IE9iamVjdC5kZWVwQ29weShvYmpba2V5XSlcclxuICAgICAgICAgICAgZGVsZXRlIG9ialsnX19pc0FjdGl2ZUNsb25lX18nXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0ZW1wXHJcbn1cclxuXHJcblxyXG4vLyBXZWlnaHRlZCByYW5kb20gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY2xhc3MgV2VpZ2h0ZWRSYW5kb208VD4ge1xyXG5cdGR1cGVkOiBBcnJheTxUPnxudWxsID0gbnVsbFxyXG5cclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgd2VpZ2h0czogQXJyYXk8eyB3ZWlnaHQ6IG51bWJlciwgdmFsdWU6IFQgfT4pIHsgfVxyXG5cclxuXHRzYW1wbGUoKTogVCB7XHJcblx0XHRpZiAodGhpcy5kdXBlZCA9PT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmR1cGVkID0gW11cclxuXHRcdFx0Zm9yIChsZXQgdyBvZiB0aGlzLndlaWdodHMpIHtcclxuXHRcdFx0XHRmb3IgKGxldCBfIG9mIFsuLi5BcnJheSh3LndlaWdodCldKSB7IHRoaXMuZHVwZWQucHVzaCh3LnZhbHVlKSB9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGxldCByb2xsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5kdXBlZC5sZW5ndGgpXHJcblx0XHRyZXR1cm4gdGhpcy5kdXBlZFtyb2xsXVxyXG5cdH1cclxufVxyXG4iLCIvLyBTdHJpbmcgZXh0ZW5zaW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbmRlY2xhcmUgaW50ZXJmYWNlIFN0cmluZyB7XHJcbiAgICB0b1RpdGxlQ2FzZSgpOiBTdHJpbmdcclxuICAgIHRvU25ha2VDYXNlKCk6IFN0cmluZ1xyXG4gICAgbGFzdCgpOiBTdHJpbmdcclxufVxyXG5cclxuXHJcblN0cmluZy5wcm90b3R5cGUudG9UaXRsZUNhc2UgPSBmdW5jdGlvbigpOiBTdHJpbmcge1xyXG5cdGxldCBjaGFycyA9IFsuLi50aGlzXVxyXG5cdGxldCByZXN1bHQgPSBjaGFycy5zaGlmdCgpLnRvVXBwZXJDYXNlKClcclxuXHRsZXQgYWZ0ZXJTcGFjZSA9IGZhbHNlXHJcblx0Zm9yIChsZXQgYyBvZiBjaGFycykge1xyXG5cdFx0aWYgKGMgPT09IFwiIFwiIHx8IGMgPT09IFwiX1wiKSB7XHJcblx0XHRcdGFmdGVyU3BhY2UgPSB0cnVlXHJcblx0XHRcdHJlc3VsdCArPSBcIiBcIlxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGlmIChhZnRlclNwYWNlKSB7XHJcblx0XHRcdFx0cmVzdWx0ICs9IGMudG9VcHBlckNhc2UoKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdCArPSBjLnRvTG93ZXJDYXNlKClcclxuXHRcdFx0fVxyXG5cdFx0XHRhZnRlclNwYWNlID0gZmFsc2VcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnRvU25ha2VDYXNlID0gZnVuY3Rpb24oKTogU3RyaW5nIHtcclxuXHRyZXR1cm4gdGhpcy50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoXCIgXCIsIFwiX1wiKVxyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbigpOiBTdHJpbmcgeyByZXR1cm4gWy4uLnRoaXNdLmxhc3QoKSB9Il19
